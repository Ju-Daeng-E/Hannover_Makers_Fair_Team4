#!/bin/bash

# RC Car Camera GUI Launcher
echo "π–¥οΈ RC Car Camera GUI Launcher"
echo "=============================="

# X11 ν™κ²½ μ²΄ν¬
if [ -z "$DISPLAY" ]; then
    echo "β X11 DISPLAYκ°€ μ„¤μ •λμ§€ μ•μ•μµλ‹λ‹¤"
    echo "π’΅ SSH μ—°κ²°μ‹ λ‹¤μ λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ„Έμ”:"
    echo "   ssh -X your_username@$(hostname -I | awk '{print $1}')"
    echo "   λλ”"
    echo "   ssh -Y your_username@$(hostname -I | awk '{print $1}')"
    exit 1
else
    echo "β… X11 DISPLAY: $DISPLAY"
fi

# SSH ν™κ²½ ν™•μΈ
if [ -n "$SSH_CLIENT" ]; then
    echo "π SSH μ›κ²© μ—°κ²° κ°μ§€λ¨"
    echo "π“΅ ν΄λΌμ΄μ–ΈνΈ: $(echo $SSH_CLIENT | cut -d' ' -f1)"
fi

# OpenCV GUI μ‹¤ν–‰
echo "π€ μΉ΄λ©”λΌ GUI μ‹μ‘..."
echo "π“‹ μ΅°μ‘ ν‚¤:"
echo "   'q' λλ” ESC: μΆ…λ£"
echo "   's': μ¤ν¬λ¦°μƒ· μ €μ¥"
echo "   'f': μ „μ²΄ν™”λ©΄ ν† κΈ€"
echo "   'r': μΉ΄λ©”λΌ λ¦¬μ…‹"
echo "=============================="

# Python GUI μ‹¤ν–‰
python3 ./camera_gui.py --width 864 --height 480 --fps 30

echo "π›‘ μΉ΄λ©”λΌ GUI μΆ…λ£λ¨"