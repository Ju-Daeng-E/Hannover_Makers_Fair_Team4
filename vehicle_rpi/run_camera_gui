#!/bin/bash

# RC Car Camera GUI Launcher
echo "🖥️ RC Car Camera GUI Launcher"
echo "=============================="

# X11 환경 체크
if [ -z "$DISPLAY" ]; then
    echo "❌ X11 DISPLAY가 설정되지 않았습니다"
    echo "💡 SSH 연결시 다음 명령어를 사용하세요:"
    echo "   ssh -X your_username@$(hostname -I | awk '{print $1}')"
    echo "   또는"
    echo "   ssh -Y your_username@$(hostname -I | awk '{print $1}')"
    exit 1
else
    echo "✅ X11 DISPLAY: $DISPLAY"
fi

# SSH 환경 확인
if [ -n "$SSH_CLIENT" ]; then
    echo "🌐 SSH 원격 연결 감지됨"
    echo "📡 클라이언트: $(echo $SSH_CLIENT | cut -d' ' -f1)"
fi

# OpenCV GUI 실행
echo "🚀 카메라 GUI 시작..."
echo "📋 조작 키:"
echo "   'q' 또는 ESC: 종료"
echo "   's': 스크린샷 저장"
echo "   'f': 전체화면 토글"
echo "   'r': 카메라 리셋"
echo "=============================="

# Python GUI 실행
python3 ./camera_gui.py --width 864 --height 480 --fps 30

echo "🛑 카메라 GUI 종료됨"